<mat-card>
  <mat-card-title>Add appointment</mat-card-title>
  <mat-divider></mat-divider>
  <mat-card-content>
    <form #formulaire="ngForm">
      <br />
      <div class="form-group">
        <label for="veterinary">Veterinary</label>
        <select
          required
          type="text"
          class="form-control"
          ngModel
          #vetInput="ngModel"
          name="vet"
          id="veterinary"
        >
          <option *ngFor="let vet of vets" [ngValue]="vet._id">
            {{vet.firstName + ' ' + vet.lastName}}
          </option>
        </select>
      </div>
      <div class="alert alert-danger mt-2 mb-0" *ngIf="vetInput.invalid && vetInput.touched">
        Veterinary is required
      </div>
      <br />
      <div class="form-group">
        <label for="name">Location</label>
        <input
          required
          type="text"
          #locationInput="ngModel"
          class="form-control"
          ngModel
          name="place"
          id="location"
          placeholder="Enter location"
        />
      </div>
      <div class="alert alert-danger mt-2 mb-0" *ngIf="locationInput.invalid && locationInput.touched">
          Location is required
      </div>
      <br />
      <div class="form-group">
        <label for="date">Date</label>
        <input
          required
          type="date"
          ngModel
          #dateInput="ngModel"
          name="date"
          class="form-control"
          id="date"
        />
      </div>
      <div class="alert alert-danger mt-2 mb-0" *ngIf="dateInput.invalid && dateInput.touched">
        Date is required
    </div>
      <br />
      <div class="form-group">
        <label for="desc">Description</label>
        <textarea
          rows="3"
          class="form-control"
          ngModel
          name="report"
          id="desc"
          placeholder="Enter report"
        ></textarea>
      </div>
    </form>
  </mat-card-content>
  <mat-divider></mat-divider>
  <mat-card-actions align="end">
    <button [disabled]="formulaire.invalid" mat-raised-button (click)="addAppointment(formulaire)"  color="primary">
      Add
    </button>
  </mat-card-actions>
</mat-card>

<div class="mt-2 mat-elevation-z8">
  <table class="w-100" mat-table [dataSource]="dataSource">
    <!-- Name Column -->
    <ng-container matColumnDef="Veterinary">
      <th mat-header-cell *matHeaderCellDef> Veterinary </th>
      <td mat-cell *matCellDef="let element"> {{element.vet.firstName + " " +  element.vet.lastName}} </td>
    </ng-container>

    <ng-container matColumnDef="Location">
          <th mat-header-cell *matHeaderCellDef>Location </th>
          <td mat-cell *matCellDef="let element"> {{element.place}} </td>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="Date">
      <th mat-header-cell *matHeaderCellDef> Date </th>
      <td mat-cell *matCellDef="let element"> {{element.date}} </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="Report">
      <th mat-header-cell *matHeaderCellDef> Report </th>
      <td mat-cell *matCellDef="let element"> {{element.report}} </td>
    </ng-container>

    <!-- Done Column -->
    <ng-container matColumnDef="Done">
      <th mat-header-cell *matHeaderCellDef> Done </th>
      <td mat-cell *matCellDef="let element"> 
        <button mat-raised-button *ngIf="element.done" (click)="updateDone(element._id,!element.done)"  color="primary" >Done</button>
        <button mat-raised-button *ngIf="!element.done" (click)="updateDone(element._id,!element.done)" color="warn">Not Done</button>
         </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="Actions">
      <th mat-header-cell *matHeaderCellDef> Actions </th>
      <td mat-cell *matCellDef="let element"> 
        <button mat-raised-button (click)="updateAppointment(element)" class="mr-2" color="primary" >Edit</button>
        <button mat-raised-button (click)="deleteAppointment(element._id)" color="warn">Delete</button>
         </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>